sudo: false
language: go
env:
  global:
  - GO111MODULE=on
  - secure: H7r8HdVqskLQ/dErn5siA5wayPk7Nt/xEcRAaiUJIp65bug6Ol8IOOABRNBkAnkKMY+7TEOgGqJr3CggszbEEIJnGqtxQ2gVx0jX3HRO68cACA6wDqT2SXxMh+S2+Lw3TMfHzbZEufXdPdSX/XRhgYlCb7rWffPlzr20KoNvopgrG6NjbEflKFlPc7Hn8kz2xFkGCDuYd9HnXnqnuoR3hphm/q2EMJs01S60TI81LQF/0ZGgd73AhhO7N6g+TXrhfZ8SNNXg58xusMFv5JzO4pGW199w+bQXardfccQCXEZuLG7z2ld/vWscB2YNHtEZenJGs2f8AbvgEwqxdGCMapdw0kiHZkq1b6I0JCMcenqRI51jqBqNxqHKXWiQH8GlNeWRJPNtFA2yiyTPb0cxiAuNbX4lD2vRzB/LvVakSvMNw73iRzrx+jsXNxdqm4usqzOOecfrUcxvVWRr3B+SP+LLXsS3X07vr9B9bptJB8BKZpDZMQ768dDfWkfp4VSBeHH0CeaUSA+F61wIPFDwOUsz3GK1sKbe8K1c51ITmyyIwN1CPGlahKP0kLxeT2qlrMFgCF4kCEjfnSvlZdXPJVL4XLiu/TzVEqVkJ7ZyYAp6qBrlzG2s5aDKd3BhvGXIgN7ZVsRws2d/zp78rOlpqHYhgxueQdzoo686ncz4zvE=
go:
  - 1.11.x
install: true
before_script:
  - curl -sfL https://install.goreleaser.com/github.com/golangci/golangci-lint.sh | sh -s -- -b $(go env GOPATH)/bin v1.16.0
  - go get github.com/gobuffalo/packr/v2/packr2
  - packr2
script:
  - golangci-lint run
  - go test -v -race -coverprofile=coverage.txt -covermode=atomic ./...
after_success:
  - bash <(curl -s https://codecov.io/bash)
  - bash -c 'git checkout go.mod go.sum'
